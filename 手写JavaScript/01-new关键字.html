<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>new关键字</title>
</head>
<body>
    <div>
        <p>1、创建一个空的简单的JavaScript对象(即 {})</p>
        <p>2、为步骤1的对象添加属性__proto__，指定属性链接至构造函数创建的新对象</p>
        <p>3、将步骤1新创建的对象作为this的上下文</p>
        <p>4、如果该函数没有返回对象，则返回this</p>
    </div>
</body>
<script>
    /**
         * @param fn 构造函数
     */
    function createNew(fn){
        //1、创建一个空的简单的JavaScript对象(即{})
        var obj={};
        //2、为步骤1的对象添加属性__proto__，指定属性链接至构造函数创建的新对象
        obj.__proto__ =fn.prototype
        args = Array.prototype.slice.call(arguments,1) //获取后面参数
        // 3、将步骤1新创建的对象作为this的上下文
        var result = fn.apply(obj,args)
        // 4、如果该函数没有返回对象，则返回this
        return result?result:obj

    }

    function constructorFn(name,age){
        this.name=name;
        this.age=age
    }

    var result=createNew(constructorFn,'陈冠希',18)
    console.log('result',result)

    var res=new constructorFn('金城武',19)
    console.log('res',res)
</script>
</html>